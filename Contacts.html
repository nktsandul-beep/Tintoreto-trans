<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TINTORETO-TRANS — Контакты</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <script src="translations.js" defer></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    (function(){
      emailjs.init("nH8SMwqmxwJGRXoIS");
    })();
  </script>
</head>
<body>

<header class="header">
  <div class="container header-inner">
    <div class="lang-switcher">
      <button class="lang-btn-current" id="lang-current">
        <span id="lang-current-text">RU</span>
        <i class="fa-solid fa-chevron-down"></i>
      </button>
      <div class="lang-dropdown" id="lang-dropdown">
        <button class="lang-option" data-lang="ru">RU</button>
        <button class="lang-option" data-lang="en">EN</button>
        <button class="lang-option" data-lang="es">ES</button>
        <button class="lang-option" data-lang="ro">RO</button>
      </div>
    </div>

    <a href="Index.html" class="logo">TINTORETO-TRANS</a>

    <div class="header-right">
      <div class="header-messengers">
        <a href="https://wa.me/37367187777" class="messenger-btn" title="WhatsApp">
          <i class="fa-brands fa-whatsapp"></i>
        </a>
        <a href="#" class="messenger-btn" title="Telegram">
          <i class="fa-brands fa-telegram"></i>
        </a>
      </div>

      <nav class="nav">
        <a href="Index.html" data-translate="nav-home">Главная</a>
        <a href="About.html" data-translate="nav-about">О нас</a>
        <a href="Contacts.html" class="active" data-translate="nav-contacts">Контакты</a>
      </nav>
    </div>

    <div class="burger" onclick="document.body.classList.toggle('menu-open')">
      <span></span><span></span><span></span>
    </div>
  </div>

  <div class="mobile-menu">
    <a href="Index.html" data-translate="nav-home">Главная</a>
    <a href="About.html" data-translate="nav-about">О нас</a>
    <a href="Contacts.html" class="active" data-translate="nav-contacts">Контакты</a>
  </div>
</header>

<section class="page-hero">
  <div class="about-hero-banner">
    <div class="about-hero-image-wrapper">
      <video class="about-hero-video" autoplay muted loop playsinline preload="auto" poster="Images/contact-photo.png">
        <source src="./Images/contact-video.mp4" type="video/mp4">
        <source src="./Images/contact-video.webm" type="video/webm">
        Ваш браузер не поддерживает видео.
      </video>
      <img src="Images/contact-photo.png" alt="TINTORETO-TRANS" class="about-hero-image" id="contact-hero-fallback" style="display: none;">
      <div class="about-hero-overlay"></div>
    </div>
  </div>
  <div class="container">
    <div class="contacts-title-section">
      <h1 data-translate="contacts-title">Контакты</h1>
      <p data-translate="contacts-subtitle">Всегда на связи. Работаем 24/7.</p>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <div class="contact-grid">
      <div class="contact-card fade-up">
        <i class="fa-solid fa-phone-volume"></i>
        <h3 data-translate="contacts-phones">Телефоны</h3>
        <p>
          <strong data-translate="contacts-manager-nikita">Менеджер Никита</strong><br>
          <a href="tel:+37367187777">+373 671 87 777</a>
        </p>
        <p>
          <strong data-translate="contacts-manager-vlad">Менеджер Влад</strong><br>
          <a href="tel:+37376684862">+373 766 84 862</a>
        </p>
        <p>
          <strong data-translate="contacts-manager-vadim">Менеджер Вадим</strong><br>
          <a href="tel:+37369305060">+373 693 05 060</a>
        </p>
      </div>

      <div class="contact-card fade-up">
        <i class="fa-solid fa-envelope"></i>
        <h3 data-translate="contacts-email">Email</h3>
        <p><a href="mailto:info@tintoreto-trans.com">info@tintoreto-trans.com</a></p>
      </div>

      <div class="contact-card fade-up">
        <i class="fa-solid fa-location-dot"></i>
        <h3 data-translate="contacts-address">Адрес</h3>
        <p>șos. Muncești, 271/4<br>Chișinău, MD2002</p>
      </div>
    </div>

    <div class="social-buttons fade-up">
      <a href="https://wa.me/37367187777" class="social-btn whatsapp">
        <i class="fa-brands fa-whatsapp"></i> WhatsApp
      </a>
      <a href="#" class="social-btn telegram">
        <i class="fa-brands fa-telegram"></i> Telegram
      </a>
    </div>
  </div>
</section>

<section class="map-section section">
  <div class="container">
    <h2 class="section-title" data-translate="contacts-map-title">Мы на карте</h2>
  </div>

  <div class="map-frame">
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2732.2769332843896!2d28.877788715315!3d47.00685369999999!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x3740aa2688b0d60!2sTintoreto-Trans!5e0!3m2!1sru!2s!4v1731600000000!5m2!1sru!2s"
      width="100%" 
      height="500" 
      style="border:0;" 
      allowfullscreen="" 
      loading="lazy" 
      referrerpolicy="no-referrer-when-downgrade"
      title="TINTORETO-TRANS - șos. Muncești, 271/4, Chișinău, MD2002">
    </iframe>
  </div>
</section>

<section id="form" class="section contact-form-section">
  <div class="container">
    <h2 class="section-title" data-translate="form-title">Напишите нам</h2>
    <p class="section-subtitle" data-translate="form-subtitle">Заполните форму, и мы свяжемся с вами в течение 15 минут</p>

    <div class="form-container">
      <form class="contact-form" action="send-email.php" method="POST">
        <div class="form-row">
          <div class="form-group">
            <label for="name" data-translate="form-name">Ваше имя</label>
            <input type="text" id="name" name="name" data-translate="form-name-placeholder" placeholder="Иван Иванов" required>
          </div>
          <div class="form-group">
            <label for="email" data-translate="form-email">Email</label>
            <input type="email" id="email" name="email" data-translate="form-email-placeholder" placeholder="ivan@example.com" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="from" data-translate="form-from">Откуда</label>
            <input type="text" id="from" name="from" data-translate="form-from-placeholder" placeholder="Город отправления">
          </div>
          <div class="form-group">
            <label for="to" data-translate="form-to">Куда</label>
            <input type="text" id="to" name="to" data-translate="form-to-placeholder" placeholder="Город назначения">
          </div>
        </div>

        <div class="form-group">
          <label for="phone" data-translate="form-phone">Телефон / WhatsApp / Telegram</label>
          <input type="tel" id="phone" name="phone" data-translate="form-phone-placeholder" placeholder="+373 693 05 060" required>
        </div>

        <div class="form-group">
          <label for="message" data-translate="form-message">Ваше сообщение</label>
          <textarea id="message" name="message" data-translate="form-message-placeholder" placeholder="Опишите ваш груз, маршрут и особые требования" required></textarea>
        </div>

        <button type="submit" class="btn btn-send">
          <i class="fa-solid fa-paper-plane"></i>
          <span data-translate="form-submit">Отправить</span>
        </button>
      </form>
    </div>
  </div>
</section>


<script>
  const animatedContacts = document.querySelectorAll('.fade-up');
  const observerContacts = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) entry.target.classList.add('visible');
    });
  }, { threshold: 0.1 });
  animatedContacts.forEach(el => observerContacts.observe(el));

  // Video fallback handling
  const contactHeroVideo = document.querySelector('.about-hero-video');
  const contactHeroFallback = document.getElementById('contact-hero-fallback');
  
  if (contactHeroVideo && contactHeroFallback) {
    contactHeroVideo.addEventListener('error', function() {
      console.log('Видео не загрузилось, показываем изображение');
      if (contactHeroFallback) {
        contactHeroFallback.style.display = 'block';
        contactHeroVideo.style.display = 'none';
      }
    });
    
    // Проверка, загрузилось ли видео
    contactHeroVideo.addEventListener('loadeddata', function() {
      console.log('Видео загружено успешно');
    });
    
    // Попытка воспроизвести видео
    contactHeroVideo.play().catch(function(error) {
      console.log('Ошибка воспроизведения видео:', error);
      if (contactHeroFallback) {
        contactHeroFallback.style.display = 'block';
        contactHeroVideo.style.display = 'none';
      }
    });
  }

  // Form submission with EmailJS
  document.querySelector('.contact-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const form = this;
    const submitButton = form.querySelector('button[type="submit"]');
    const originalButtonText = submitButton.innerHTML;
    
    // Показываем загрузку
    submitButton.disabled = true;
    submitButton.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Отправка...';
    
    // Подготовка данных для EmailJS
    const templateParams = {
      from_name: form.querySelector('[name="name"]')?.value || '',
      from_email: form.querySelector('[name="email"]')?.value || '',
      phone: form.querySelector('[name="phone"]')?.value || '',
      from_location: form.querySelector('[name="from"]')?.value || '',
      to_location: form.querySelector('[name="to"]')?.value || '',
      message: form.querySelector('[name="message"]')?.value || ''
    };
    
    // Отправка через EmailJS
    emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', templateParams)
      .then(function(response) {
        const lang = localStorage.getItem('preferred-language') || 'ru';
        const successMessage = translations[lang] && translations[lang]['form-success'] 
          ? translations[lang]['form-success'] 
          : 'Спасибо за сообщение! Мы свяжемся с вами в ближайшее время.';
        
        alert(successMessage);
        form.reset();
        submitButton.disabled = false;
        submitButton.innerHTML = originalButtonText;
      }, function(error) {
        console.error('EmailJS Error:', error);
        alert('Ошибка при отправке. Попробуйте позже или свяжитесь с нами по телефону.');
        submitButton.disabled = false;
        submitButton.innerHTML = originalButtonText;
      });
  });
</script>

</body>
</html>
